---
import type { Event } from "../data/events";
import H3 from "./H3.astro";

const { event, compact = true } = Astro.props as {
  event: Event;
  compact?: boolean;
};

const date = new Date(event.date);
const formattedDate = date.toLocaleDateString("ja-JP", {
  year: "numeric",
  month: "short",
  day: "numeric",
  weekday: "short",
  timeZone: "Asia/Tokyo",
});
---

<article
  class={`grid grid-cols-[auto_1fr] gap-x-6 gap-y-4 rounded-[1rem] border border-[rgba(255,255,255,0.35)] bg-[rgba(255,255,255,0.9)] shadow-[0_15px_40px_rgba(0,26,77,0.12),inset_0_0_0_0.5px_rgba(12,51,136,0.15)] max-[680px]:grid-cols-1 ${compact ? "px-[1.25rem] py-[1.1rem]" : "p-6"}`}
>
  <div class="min-w-[140px] max-[680px]:flex max-[680px]:items-center max-[680px]:gap-2">
    <p class="mt-[0.1rem] mb-0 font-semibold text-[#34558f]">{formattedDate}</p>
  </div>
  <div class="flex flex-col gap-[0.4rem]">
    <H3 class="m-0 text-[1.1rem] font-bold leading-[1.3] text-[#0b1d3f]">
      <a class="text-[inherit] no-underline hover:underline" href={`/events/${event.slug}/`}>
        {event.title}
      </a>
    </H3>
    {event.description && (
      <p class="m-0 leading-[1.7] text-[rgba(11,29,63,0.8)]">{event.description}</p>
    )}

    {
      event.tags && (
        <div class="flex flex-wrap gap-[0.4rem]">
          {event.tags.map((tag) => (
            <span
              class="inline-flex items-center gap-[0.35rem] rounded-full bg-[rgba(12,51,136,0.12)] px-[0.7rem] py-[0.25rem] text-[0.9rem] font-semibold text-[#0b1d3f]"
              aria-label={`タグ: ${tag}`}
            >
              {tag}
            </span>
          ))}
        </div>
      )
    }
  </div>
</article>
