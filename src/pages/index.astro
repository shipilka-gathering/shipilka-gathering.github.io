---
import Layout from "../layouts/Layout.astro";
import H1 from "../components/H1.astro";
import H2 from "../components/H2.astro";
import Rules from "../components/Rules.astro";
import EventCard from "../components/EventCard.astro";
import { events } from "../data/events";
import HomeLayout from "../layouts/HomeLayout.astro";

const sortedEvents = [...events].sort(
  (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()
);
const latestEvent = sortedEvents[0];
const navItems = [
  { href: "https://vrc.group/SIPILK.2143", label: "VRChatグループ ↗" },
  { href: "https://x.com/Shipilka_club", label: "Twitter ↗" },
  { href: "https://discord.com/invite/MzXx8RjCuw", label: "Discord ↗" },
  { href: "/events/", label: "イベント" },
  { href: "/articles/", label: "記事" },
  { href: "/#rules", label: "ルール" },
];
---

<HomeLayout
  title="シピルカくん集会"
  description="VRChatで開催しているシピルカくん集会の告知サイト。過去回のアーカイブやルールをまとめています。"
>
  <header
    class="absolute z-10 flex w-full items-center gap-4 p-12 [background:linear-gradient(to_top,transparent_0%,rgba(0,0,0,0.5)_100%)] max-[720px]:flex-col max-[720px]:items-start"
  >
    <a
      class="inline-flex items-center gap-3 no-underline text-[inherit]"
      href="/"
    >
      <img
        src="/images/logo-wide.png"
        alt="シピルカくん集会のロゴ"
        loading="lazy"
        class="h-[52px] w-auto object-contain"
      />
    </a>
    <nav
      class="ml-auto inline-flex gap-[0.9rem] max-[720px]:w-full max-[720px]:flex-wrap"
    >
      {
        navItems.map((item) => (
          <a
            class="rounded-[10px] px-[0.65rem] py-[0.4rem] font-semibold text-[#f2f5ff] no-underline [transition:background_0.2s_ease,transform_0.15s_ease] hover:-translate-y-[1px] hover:bg-[rgba(12,51,136,0.08)]"
            href={item.href}
          >
            {item.label}
          </a>
        ))
      }
    </nav>
  </header>
  <main class="flex flex-col">
    <section>
      <img
        src="/images/hero-image.png"
        alt="たくさんのシピルカくんが月の周りに集まっているイラスト"
        loading="lazy"
        class="w-full [mask-image:linear-gradient(to_bottom,black_90%,transparent_100%)]"
      />
    </section>
    <div
      class="relative z-10 mx-8 md:mx-16 xl:mx-32 2xl:mx-64 px-6 pt-6 pb-12 flex flex-col gap-[10rem] max-[720px]:px-4 max-[720px]:pt-4 max-[720px]:pb-10"
    >
      <section class="relative grid gap-3 overflow-hidden">
        <div class="flex items-center gap-4 m-4 md:m-16 xl:m-32">
          <div>
            <H1>
              <span class="text-slate-50">月は満ちた<br />たくさんのシピルカくんが<br />待っている</span>
            </H1>
            <p
              class="my-8 text-[clamp(1rem,3vw,2rem)] leading-[1.7] text-[#f2f5ff]"
            >
              シピルカくん集会は、主にVRChatで開催しているシピルカくんのアバター集会です。初参加の方も、久しぶりの方も歓迎します！
            </p>
          </div>
        </div>
      </section>

      <section>
        <div class="my-8 flex flex-wrap items-center justify-center gap-8">
          <a
            class="inline-flex items-center justify-center gap-[0.35rem] rounded-[12px] border border-[rgba(255,255,255,0.6)] px-10 py-6 font-bold text-[clamp(1rem,3vw,2rem)] text-[#1b1b1b] no-underline shadow-[0_10px_20px_rgba(244,194,31,0.3)] [background:linear-gradient(120deg,#f4c21f,#ffd773)] [transition:transform_0.15s_ease,box-shadow_0.2s_ease] hover:-translate-y-[1px] hover:shadow-[0_12px_30px_rgba(244,194,31,0.4)]"
            href={`/events/${latestEvent.slug}/`}
          >
            最新のイベントを確認する
          </a>
          <a
            class="inline-flex items-center justify-center gap-[0.35rem] rounded-[12px] border border-[rgba(12,51,136,0.2)] bg-[rgba(255,255,255,0.9)] px-10 py-6 font-bold text-[clamp(1rem,3vw,2rem)] text-[#0b1d3f] no-underline shadow-none [transition:transform_0.15s_ease,box-shadow_0.2s_ease] hover:-translate-y-[1px] hover:shadow-[0_12px_30px_rgba(244,194,31,0.4)]"
            href="https://vrc.group/SIPILK.2143"
          >
            グループに参加する↗
          </a>
        </div>
        <div
          class="rounded-[20px] border border-[rgba(255,255,255,0.3)] bg-[rgba(255,255,255,0.9)] p-6 shadow-[0_18px_42px_rgba(0,26,77,0.14),inset_0_0_0_0.5px_rgba(12,51,136,0.15)] max-[720px]:p-5"
        >
          <div
            class="mb-4 flex items-baseline justify-between gap-4 max-[720px]:flex-col max-[720px]:items-start"
          >
            <div>
              <H2> 最新の集会 </H2>
            </div>
            <a
              class="font-bold text-[#0b1d3f] no-underline hover:underline"
              href="/events/">過去の集会をすべて見る →</a
            >
          </div>
          <EventCard event={latestEvent} compact={false} />
        </div>
      </section>

      <Rules />

      <section class="text-center justify-self-center text-[#f2f5ff]">
        <H2>
          <span class="text-[#f2f5ff]"
            >スクロールはここまで！<br />シピルカくん集会に参加しよう</span
          >
        </H2>

        <div class="my-8 flex flex-wrap items-center justify-center gap-8">
          <a
            class="inline-flex items-center justify-center gap-[0.35rem] rounded-[12px] border border-[rgba(255,255,255,0.6)] px-10 py-6 font-bold text-[clamp(1rem,3vw,2rem)] text-[#1b1b1b] no-underline shadow-[0_10px_20px_rgba(244,194,31,0.3)] [background:linear-gradient(120deg,#f4c21f,#ffd773)] [transition:transform_0.15s_ease,box-shadow_0.2s_ease] hover:-translate-y-[1px] hover:shadow-[0_12px_30px_rgba(244,194,31,0.4)]"
            href={`/events/${latestEvent.slug}/`}
          >
            最新のイベントを確認する
          </a>
          <a
            class="inline-flex items-center justify-center gap-[0.35rem] rounded-[12px] border border-[rgba(12,51,136,0.2)] bg-[rgba(255,255,255,0.9)] px-10 py-6 font-bold text-[clamp(1rem,3vw,2rem)] text-[#0b1d3f] no-underline shadow-none [transition:transform_0.15s_ease,box-shadow_0.2s_ease] hover:-translate-y-[1px] hover:shadow-[0_12px_30px_rgba(244,194,31,0.4)]"
            href="https://vrc.group/SIPILK.2143"
          >
            グループに参加する↗
          </a>
        </div>
      </section>
    </div>

    <section>
      <div
        class="pt-[20em] pb-[5em] bg-[linear-gradient(#1a4da0_0%,#5056aa_30%)]"
      >
        <div
          class="[mask-image:linear-gradient(to_bottom,transparent_0%,black_15%,black_85%,transparent_100%)]"
        >
          <img
            class="w-full [mask-image:linear-gradient(transparent_0%,rgb(0_0_0_/_100%)_30%_70%,transparent_100%)]"
            src="/images/hero-bottom.png"
            alt="たくさんのシピルカくんが鏡のような湖の上にいるイラスト"
            loading="lazy"
          />
        </div>
      </div>
    </section>
  </main>
</HomeLayout>
